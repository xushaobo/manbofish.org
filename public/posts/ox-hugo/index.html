<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>博客写作流程之工具篇： emacs, orgmode, hugo &amp; ox-hugo - Manbofish&#39;s blog</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="Manbofish" />
  <meta name="description" content="本文将对我个人的博文写作流程 所用到的工具 做一个总结与分享。从标题就可以看出来，主要有这几个工具： emacs, orgmode &amp;amp; hugo ，另外还有两个配合 hugo 的辅助包 easy-hugo （可选） &amp;amp; ox-hugo 。
 hugo : https://gohugo.io/ orgmode : https://orgmode.org/ ox-hugo : https://ox-hugo.scripter.co/ easy-hygo : https://github.com/masasam/emacs-easy-hugo  &amp;lt;!&amp;ndash;more&amp;ndash;&amp;gt;
自问自答 问： 为什么写这篇文章？ 答： 中文搜索居然搜索不到一篇有关 ox-hugo 的内容。
问： 这篇文章主要解决什么问题？ 答： orgmode 配合 hugo 来写作、发布、管理博文的一种便捷方案。
问： 为什么用 emacs 和 orgmode ？ 答： 谁让我当年入了 emacs 和 orgmode 的「坑」 😂 ，这只是习惯而已。这俩工具还是需要一定的学习成本的，因此，本文对不熟悉 emacs 和 orgmode，或者使用其它编辑器的用户没多大帮助，但多少可以了解一下。
问： 为什么用 hugo ？ 答： 最开始只是因为 hugo 原生支持 orgmode ，事后来看，其实支持的不是很好，但是 ox-hugo 解决了用 orgmode 写博文的问题。当然还有一点，在生成静态网站的诸多工具（如 jekyll, hexo 等等）中，我发现 hugo 的安装是最便捷的，只需要下载一个二进制文件直接安装就能用了，而其它工具却总要安装一些别的依赖。网上还有种说法是 hugo 的网站生成速度是最快的，这个我没测试过，也不太确定。
发布博文的一般流程  创建一个 orgmode heading 作为博文标题； 写文章（废话）； 使用 ox-hugo 生成 markdown 文件； 使用 easy-hugo 预览； 发布（废话）。  如前文所说，如果你不熟悉 emacs 和 orgmode ，一定会觉得这个流程好麻烦，何必用这些工具，把写作这回事儿弄得复杂了。我下面会对这个流程进行补充说明，并阐述它们的优点。
创建博文 正常我们使用 hugo 是怎样创建一篇新博文的呢？在命令行下，敲击命令 hugo new posts/my-first-post.md ，然后用自己熟悉的编辑器编辑这个文件。这个文件的头部包含我们这篇文章的一些基本信息，比如像这样：
--- title: &amp;#34;An Example Post&amp;#34; #标题 date: 2018-01-01T16:01:23&#43;08:00 #发布时间 lastmod: 2018-01-02T16:01:23&#43;08:00 #修改时间 draft: false #是否是草稿？ tags: [&amp;#34;tag-1&amp;#34;, &amp;#34;tag-2&amp;#34;, &amp;#34;tag-3&amp;#34;] #标签 categories: [&amp;#34;index&amp;#34;] #分类 --- 那么，使用 ox-hugo 之后，是怎样表示这些基本信息的呢？
一种是使用 orgmode 的一个标题（heading），这种方式比较适合一些随笔或者简短的文章，像这样：
    说明：
 1 是 ox-hugo 的单文件配置 2 是这篇文章的完成情况， DONE 说明已完成 3 是这篇文章的标题 4 是这篇文章的 tag ，tag 前带有 @ 表示 category 5 是 DONE 自动生成的时间戳，表示这篇文章的完成时间 6 是导出为 markdown 文件后的文件名  还有一种是使用单独的文件 example.org ，像这样：
    这两种方式都可以配合 emacs 强大的功能来快速生成，而不必每次都手动输入，亦或是复制粘贴。
使用 org-capture 创建博文 以下配置摘自 官方介绍 ：
;; org-hugo capture (with-eval-after-load &amp;#39;org-capture (defun org-hugo-new-subtree-post-capture-template () &amp;#34;Returns `org-capture&amp;#39;template string for new Hugo post. See `org-capture-templates&amp;#39;for more information.&amp;#34; (let* (;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/ (date (format-time-string (org-time-stamp-format :long :inactive) (org-current-time))) (title (read-from-minibuffer &amp;#34;Post Title: &amp;#34;)) ;Prompt to enter the post title (fname (org-hugo-slug title))) (mapconcat #&amp;#39;identity `( ,(concat &amp;#34;** TODO &amp;#34; title &amp;#34; :@随笔:&amp;#34;) &amp;#34;:PROPERTIES:&amp;#34; ,(concat &amp;#34;:EXPORT_FILE_NAME: &amp;#34; fname) ;; ,(concat &amp;#34;:EXPORT_DATE: &amp;#34; date) ;Enter current date and time &amp;#34;:END:&amp;#34; &amp;#34;%?\n&amp;#34;) ;Place the cursor here finally &amp;#34;\n&amp;#34;))) (add-to-list &amp;#39;org-capture-templates &amp;#39;(&amp;#34;h&amp;#34; ;`org-capture&amp;#39; binding &#43; h &amp;#34;Hugo post&amp;#34; entry ;; It is assumed that below file is present in `org-directory&amp;#39; ;; and that it has a &amp;#34;Blog Ideas&amp;#34; heading. It can even be a ;; symlink pointing to the actual location of all-posts.org! (file&#43;headline &amp;#34;~/Dropbox/Write/blog/orgpost/0000-posts.org&amp;#34; &amp;#34;INBOX&amp;#34;) (function org-hugo-new-subtree-post-capture-template)))) (spacemacs/set-leader-keys &amp;#34;av&amp;#34; &amp;#39;org-capture) 使用 YASnippet 创建博文 我在文末的附录中，会附上我使用的一些 snippet 模板。
模板的用法： 输入字母 h ，按下 M-/ ，它就会自动帮你生成以下内容：
#&#43;HUGO_BASE_DIR: ../ #&#43;TITLE: #&#43;DATE: #&#43;HUGO_AUTO_SET_LASTMOD: t #&#43;HUGO_TAGS: #&#43;HUGO_CATEGORIES: #&#43;HUGO_DRAFT: false 由 ox-hugo 生成 markdown 尽管说 hugo 原生支持渲染 orgmode 文件，但它所使用的 markdown 渲染引擎比 orgmode 的渲染引擎要强大的多，谁让 markdown 更流行呢？这是使用 ox-hugo 的原因之一。
使用 ox-hugo 可以将你的 orgmode 博文，生成指定的 markdown 文件，这只需要一条指令就够了（官方默认 C-c C-e H h ），并且，它还会自动更正你的文章 修改时间 ，markdown 文件中的 lastmod 值。
至此，你就已经可以按照常规的方法来预览、发布你的博文了。不过还有一个扩展没有介绍—— easy-hugo 。
使用 easy-hugo 管理你的博客（可选） {{&amp;lt; figure src=&amp;quot;/image/other/ox-hugo-00.png&amp;quot; title=&amp;ldquo;Easy-Hugo 主界面&amp;rdquo; class=&amp;ldquo;center&amp;rdquo; &amp;gt;}}
常规的方法是怎样来预览你的博客呢？先进入你的博客目录，然后键入命令 hugo server 。
使用 easy-hugo 之后，打开它的主界面（我的快捷键 &amp;lt;SPA&amp;gt; a h ），再按 p 键就可以直接预览了。它还有快速打开你的博客配置文件，快速发布到 github，等等功能，可以单独写篇介绍了。不过我只是用它来管理博文而已。
最后的总结 emacs ，想说爱你不容易。😅
用惯了一种编辑器，任何文本编辑相关的工作都想通过它来完成，换用其他的编辑器总觉得缺了些什么。这个写作流程，在我短暂的使用过程中（不到一年），总体上还是挺舒适的。这篇文章算是做一个梳理。
为什么我从头到尾都没提到如何配置 ox-hugo 和 easy-hugo 呢？ emacs 的配置千差万别，怎样配置还是自己去看它们的文档吧。
附录A：几个辅助写作的 emacs 扩展  joostkremers/writeroom-mode: Writeroom-mode: distraction-free writing for Emacs. spacemacs 的 emoji Layer ，方便插入 emoji 表情  附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接 将以下代码存储为浏览器的书签，以后获取网页的标题和链接只需要点击这个书签即可。链接的标题默认是网站的标题，也可以选中一段文字作为标题。
orgmode 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&amp;#39;&amp;#39;, &amp;#39;[[&amp;#39; &#43; location.href &#43; &amp;#39;][&amp;#39; &#43; anchor &#43; &amp;#39;]]&amp;#39;)); })(); markdown 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&amp;#39;&amp;#39;, &amp;#39;[&amp;#39; &#43; anchor &#43; &amp;#39;](&amp;#39; &#43; location.href &#43; &amp;#39;)&amp;#39;)); })(); 附录C：我的 YASnippet 模板 hugo 文章信息模板 # -*- mode: snippet -*- # name: hugo # key: h # -- #&#43;HUGO_BASE_DIR: ../ #&#43;TITLE: $1 #&#43;DATE: `(format-time-string &amp;quot;%Y-%m-%d&amp;quot;)` #&#43;HUGO_AUTO_SET_LASTMOD: t #&#43;HUGO_TAGS: $2 #&#43;HUGO_CATEGORIES: $3 #&#43;HUGO_DRAFT: false $0 more 我也搞不清为什么我总是记不住 `
" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.92.2" />


<link rel="canonical" href="http://blog.morechina.com/posts/ox-hugo/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.6aa088348d86326ca4be4205ae9973752a42b2e758c2f5f879a69172441859c9.css" integrity="sha256-aqCINI2GMmykvkIFrplzdSpCsudYwvX4eaaRckQYWck=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="博客写作流程之工具篇： emacs, orgmode, hugo &amp; ox-hugo" />
<meta property="og:description" content="本文将对我个人的博文写作流程 所用到的工具 做一个总结与分享。从标题就可以看出来，主要有这几个工具： emacs, orgmode &amp; hugo ，另外还有两个配合 hugo 的辅助包 easy-hugo （可选） &amp; ox-hugo 。

hugo : https://gohugo.io/
orgmode : https://orgmode.org/
ox-hugo : https://ox-hugo.scripter.co/
easy-hygo : https://github.com/masasam/emacs-easy-hugo

&lt;!&ndash;more&ndash;&gt;
自问自答
问： 为什么写这篇文章？
答： 中文搜索居然搜索不到一篇有关 ox-hugo 的内容。
问： 这篇文章主要解决什么问题？
答： orgmode 配合 hugo 来写作、发布、管理博文的一种便捷方案。
问： 为什么用 emacs 和 orgmode ？
答： 谁让我当年入了 emacs 和 orgmode 的「坑」 😂 ，这只是习惯而已。这俩工具还是需要一定的学习成本的，因此，本文对不熟悉 emacs 和 orgmode，或者使用其它编辑器的用户没多大帮助，但多少可以了解一下。
问： 为什么用 hugo ？
答： 最开始只是因为 hugo 原生支持 orgmode ，事后来看，其实支持的不是很好，但是 ox-hugo 解决了用 orgmode 写博文的问题。当然还有一点，在生成静态网站的诸多工具（如 jekyll, hexo 等等）中，我发现 hugo 的安装是最便捷的，只需要下载一个二进制文件直接安装就能用了，而其它工具却总要安装一些别的依赖。网上还有种说法是 hugo 的网站生成速度是最快的，这个我没测试过，也不太确定。
发布博文的一般流程

创建一个 orgmode heading 作为博文标题；
写文章（废话）；
使用 ox-hugo 生成 markdown 文件；
使用 easy-hugo 预览；
发布（废话）。

如前文所说，如果你不熟悉 emacs 和 orgmode ，一定会觉得这个流程好麻烦，何必用这些工具，把写作这回事儿弄得复杂了。我下面会对这个流程进行补充说明，并阐述它们的优点。
创建博文
正常我们使用 hugo 是怎样创建一篇新博文的呢？在命令行下，敲击命令 hugo new posts/my-first-post.md ，然后用自己熟悉的编辑器编辑这个文件。这个文件的头部包含我们这篇文章的一些基本信息，比如像这样：
---
title: &#34;An Example Post&#34;  #标题
date: 2018-01-01T16:01:23&#43;08:00 #发布时间
lastmod: 2018-01-02T16:01:23&#43;08:00 #修改时间
draft: false  #是否是草稿？
tags: [&#34;tag-1&#34;, &#34;tag-2&#34;, &#34;tag-3&#34;]  #标签
categories: [&#34;index&#34;]  #分类
---
那么，使用 ox-hugo 之后，是怎样表示这些基本信息的呢？
一种是使用 orgmode 的一个标题（heading），这种方式比较适合一些随笔或者简短的文章，像这样：




    
      
    
    
  


说明：

1 是 ox-hugo 的单文件配置
2 是这篇文章的完成情况， DONE 说明已完成
3 是这篇文章的标题
4 是这篇文章的 tag ，tag 前带有 @ 表示 category
5 是 DONE 自动生成的时间戳，表示这篇文章的完成时间
6 是导出为 markdown 文件后的文件名

还有一种是使用单独的文件 example.org ，像这样：




    
      
    
    
  


这两种方式都可以配合 emacs 强大的功能来快速生成，而不必每次都手动输入，亦或是复制粘贴。
使用 org-capture 创建博文
以下配置摘自 官方介绍 ：
;; org-hugo capture
(with-eval-after-load &#39;org-capture
  (defun org-hugo-new-subtree-post-capture-template ()
    &#34;Returns `org-capture&#39; template string for new Hugo post.
See `org-capture-templates&#39; for more information.&#34;
    (let* (;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/
           (date (format-time-string (org-time-stamp-format :long :inactive) (org-current-time)))
           (title (read-from-minibuffer &#34;Post Title: &#34;)) ;Prompt to enter the post title
           (fname (org-hugo-slug title)))
      (mapconcat #&#39;identity
                 `(
                   ,(concat &#34;** TODO &#34; title &#34;     :@随笔:&#34;)
                   &#34;:PROPERTIES:&#34;
                   ,(concat &#34;:EXPORT_FILE_NAME: &#34; fname)
                   ;; ,(concat &#34;:EXPORT_DATE: &#34; date) ;Enter current date and time
                   &#34;:END:&#34;
                   &#34;%?\n&#34;)          ;Place the cursor here finally
                 &#34;\n&#34;)))

  (add-to-list &#39;org-capture-templates
               &#39;(&#34;h&#34;                ;`org-capture&#39; binding &#43; h
                 &#34;Hugo post&#34;
                 entry
                 ;; It is assumed that below file is present in `org-directory&#39;
                 ;; and that it has a &#34;Blog Ideas&#34; heading. It can even be a
                 ;; symlink pointing to the actual location of all-posts.org!
                 (file&#43;headline &#34;~/Dropbox/Write/blog/orgpost/0000-posts.org&#34; &#34;INBOX&#34;)
                 (function org-hugo-new-subtree-post-capture-template))))

(spacemacs/set-leader-keys &#34;av&#34; &#39;org-capture)

使用 YASnippet 创建博文
我在文末的附录中，会附上我使用的一些 snippet 模板。
模板的用法：
输入字母 h ，按下 M-/ ，它就会自动帮你生成以下内容：
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE:
#&#43;DATE:
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS:
#&#43;HUGO_CATEGORIES:
#&#43;HUGO_DRAFT: false
由 ox-hugo 生成 markdown
尽管说 hugo 原生支持渲染 orgmode 文件，但它所使用的 markdown 渲染引擎比 orgmode 的渲染引擎要强大的多，谁让 markdown 更流行呢？这是使用 ox-hugo 的原因之一。
使用 ox-hugo 可以将你的 orgmode 博文，生成指定的 markdown 文件，这只需要一条指令就够了（官方默认 C-c C-e H h ），并且，它还会自动更正你的文章 修改时间 ，markdown 文件中的 lastmod 值。
至此，你就已经可以按照常规的方法来预览、发布你的博文了。不过还有一个扩展没有介绍—— easy-hugo 。
使用 easy-hugo 管理你的博客（可选）
{{&lt; figure src=&quot;/image/other/ox-hugo-00.png&quot; title=&ldquo;Easy-Hugo 主界面&rdquo; class=&ldquo;center&rdquo; &gt;}}
常规的方法是怎样来预览你的博客呢？先进入你的博客目录，然后键入命令 hugo server 。
使用 easy-hugo 之后，打开它的主界面（我的快捷键 &lt;SPA&gt; a h ），再按 p 键就可以直接预览了。它还有快速打开你的博客配置文件，快速发布到 github，等等功能，可以单独写篇介绍了。不过我只是用它来管理博文而已。
最后的总结
emacs ，想说爱你不容易。😅
用惯了一种编辑器，任何文本编辑相关的工作都想通过它来完成，换用其他的编辑器总觉得缺了些什么。这个写作流程，在我短暂的使用过程中（不到一年），总体上还是挺舒适的。这篇文章算是做一个梳理。
为什么我从头到尾都没提到如何配置 ox-hugo 和 easy-hugo 呢？ emacs 的配置千差万别，怎样配置还是自己去看它们的文档吧。
附录A：几个辅助写作的 emacs 扩展

joostkremers/writeroom-mode: Writeroom-mode: distraction-free writing for Emacs.
spacemacs 的 emoji Layer ，方便插入 emoji 表情

附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接
将以下代码存储为浏览器的书签，以后获取网页的标题和链接只需要点击这个书签即可。链接的标题默认是网站的标题，也可以选中一段文字作为标题。
orgmode 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[[&#39; &#43; location.href &#43; &#39;][&#39; &#43; anchor &#43; &#39;]]&#39;)); })();
markdown 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[&#39; &#43; anchor &#43; &#39;](&#39; &#43; location.href &#43; &#39;)&#39;)); })();
附录C：我的 YASnippet 模板
hugo 文章信息模板
# -*- mode: snippet -*-
# name: hugo
# key: h
# --
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE: $1
#&#43;DATE: `(format-time-string &quot;%Y-%m-%d&quot;)`
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS: $2
#&#43;HUGO_CATEGORIES: $3
#&#43;HUGO_DRAFT: false

$0
more
我也搞不清为什么我总是记不住 `" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.morechina.com/posts/ox-hugo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-11-17T14:41:03+08:00" />

<meta itemprop="name" content="博客写作流程之工具篇： emacs, orgmode, hugo &amp; ox-hugo">
<meta itemprop="description" content="本文将对我个人的博文写作流程 所用到的工具 做一个总结与分享。从标题就可以看出来，主要有这几个工具： emacs, orgmode &amp; hugo ，另外还有两个配合 hugo 的辅助包 easy-hugo （可选） &amp; ox-hugo 。

hugo : https://gohugo.io/
orgmode : https://orgmode.org/
ox-hugo : https://ox-hugo.scripter.co/
easy-hygo : https://github.com/masasam/emacs-easy-hugo

&lt;!&ndash;more&ndash;&gt;
自问自答
问： 为什么写这篇文章？
答： 中文搜索居然搜索不到一篇有关 ox-hugo 的内容。
问： 这篇文章主要解决什么问题？
答： orgmode 配合 hugo 来写作、发布、管理博文的一种便捷方案。
问： 为什么用 emacs 和 orgmode ？
答： 谁让我当年入了 emacs 和 orgmode 的「坑」 😂 ，这只是习惯而已。这俩工具还是需要一定的学习成本的，因此，本文对不熟悉 emacs 和 orgmode，或者使用其它编辑器的用户没多大帮助，但多少可以了解一下。
问： 为什么用 hugo ？
答： 最开始只是因为 hugo 原生支持 orgmode ，事后来看，其实支持的不是很好，但是 ox-hugo 解决了用 orgmode 写博文的问题。当然还有一点，在生成静态网站的诸多工具（如 jekyll, hexo 等等）中，我发现 hugo 的安装是最便捷的，只需要下载一个二进制文件直接安装就能用了，而其它工具却总要安装一些别的依赖。网上还有种说法是 hugo 的网站生成速度是最快的，这个我没测试过，也不太确定。
发布博文的一般流程

创建一个 orgmode heading 作为博文标题；
写文章（废话）；
使用 ox-hugo 生成 markdown 文件；
使用 easy-hugo 预览；
发布（废话）。

如前文所说，如果你不熟悉 emacs 和 orgmode ，一定会觉得这个流程好麻烦，何必用这些工具，把写作这回事儿弄得复杂了。我下面会对这个流程进行补充说明，并阐述它们的优点。
创建博文
正常我们使用 hugo 是怎样创建一篇新博文的呢？在命令行下，敲击命令 hugo new posts/my-first-post.md ，然后用自己熟悉的编辑器编辑这个文件。这个文件的头部包含我们这篇文章的一些基本信息，比如像这样：
---
title: &#34;An Example Post&#34;  #标题
date: 2018-01-01T16:01:23&#43;08:00 #发布时间
lastmod: 2018-01-02T16:01:23&#43;08:00 #修改时间
draft: false  #是否是草稿？
tags: [&#34;tag-1&#34;, &#34;tag-2&#34;, &#34;tag-3&#34;]  #标签
categories: [&#34;index&#34;]  #分类
---
那么，使用 ox-hugo 之后，是怎样表示这些基本信息的呢？
一种是使用 orgmode 的一个标题（heading），这种方式比较适合一些随笔或者简短的文章，像这样：




    
      
    
    
  


说明：

1 是 ox-hugo 的单文件配置
2 是这篇文章的完成情况， DONE 说明已完成
3 是这篇文章的标题
4 是这篇文章的 tag ，tag 前带有 @ 表示 category
5 是 DONE 自动生成的时间戳，表示这篇文章的完成时间
6 是导出为 markdown 文件后的文件名

还有一种是使用单独的文件 example.org ，像这样：




    
      
    
    
  


这两种方式都可以配合 emacs 强大的功能来快速生成，而不必每次都手动输入，亦或是复制粘贴。
使用 org-capture 创建博文
以下配置摘自 官方介绍 ：
;; org-hugo capture
(with-eval-after-load &#39;org-capture
  (defun org-hugo-new-subtree-post-capture-template ()
    &#34;Returns `org-capture&#39; template string for new Hugo post.
See `org-capture-templates&#39; for more information.&#34;
    (let* (;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/
           (date (format-time-string (org-time-stamp-format :long :inactive) (org-current-time)))
           (title (read-from-minibuffer &#34;Post Title: &#34;)) ;Prompt to enter the post title
           (fname (org-hugo-slug title)))
      (mapconcat #&#39;identity
                 `(
                   ,(concat &#34;** TODO &#34; title &#34;     :@随笔:&#34;)
                   &#34;:PROPERTIES:&#34;
                   ,(concat &#34;:EXPORT_FILE_NAME: &#34; fname)
                   ;; ,(concat &#34;:EXPORT_DATE: &#34; date) ;Enter current date and time
                   &#34;:END:&#34;
                   &#34;%?\n&#34;)          ;Place the cursor here finally
                 &#34;\n&#34;)))

  (add-to-list &#39;org-capture-templates
               &#39;(&#34;h&#34;                ;`org-capture&#39; binding &#43; h
                 &#34;Hugo post&#34;
                 entry
                 ;; It is assumed that below file is present in `org-directory&#39;
                 ;; and that it has a &#34;Blog Ideas&#34; heading. It can even be a
                 ;; symlink pointing to the actual location of all-posts.org!
                 (file&#43;headline &#34;~/Dropbox/Write/blog/orgpost/0000-posts.org&#34; &#34;INBOX&#34;)
                 (function org-hugo-new-subtree-post-capture-template))))

(spacemacs/set-leader-keys &#34;av&#34; &#39;org-capture)

使用 YASnippet 创建博文
我在文末的附录中，会附上我使用的一些 snippet 模板。
模板的用法：
输入字母 h ，按下 M-/ ，它就会自动帮你生成以下内容：
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE:
#&#43;DATE:
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS:
#&#43;HUGO_CATEGORIES:
#&#43;HUGO_DRAFT: false
由 ox-hugo 生成 markdown
尽管说 hugo 原生支持渲染 orgmode 文件，但它所使用的 markdown 渲染引擎比 orgmode 的渲染引擎要强大的多，谁让 markdown 更流行呢？这是使用 ox-hugo 的原因之一。
使用 ox-hugo 可以将你的 orgmode 博文，生成指定的 markdown 文件，这只需要一条指令就够了（官方默认 C-c C-e H h ），并且，它还会自动更正你的文章 修改时间 ，markdown 文件中的 lastmod 值。
至此，你就已经可以按照常规的方法来预览、发布你的博文了。不过还有一个扩展没有介绍—— easy-hugo 。
使用 easy-hugo 管理你的博客（可选）
{{&lt; figure src=&quot;/image/other/ox-hugo-00.png&quot; title=&ldquo;Easy-Hugo 主界面&rdquo; class=&ldquo;center&rdquo; &gt;}}
常规的方法是怎样来预览你的博客呢？先进入你的博客目录，然后键入命令 hugo server 。
使用 easy-hugo 之后，打开它的主界面（我的快捷键 &lt;SPA&gt; a h ），再按 p 键就可以直接预览了。它还有快速打开你的博客配置文件，快速发布到 github，等等功能，可以单独写篇介绍了。不过我只是用它来管理博文而已。
最后的总结
emacs ，想说爱你不容易。😅
用惯了一种编辑器，任何文本编辑相关的工作都想通过它来完成，换用其他的编辑器总觉得缺了些什么。这个写作流程，在我短暂的使用过程中（不到一年），总体上还是挺舒适的。这篇文章算是做一个梳理。
为什么我从头到尾都没提到如何配置 ox-hugo 和 easy-hugo 呢？ emacs 的配置千差万别，怎样配置还是自己去看它们的文档吧。
附录A：几个辅助写作的 emacs 扩展

joostkremers/writeroom-mode: Writeroom-mode: distraction-free writing for Emacs.
spacemacs 的 emoji Layer ，方便插入 emoji 表情

附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接
将以下代码存储为浏览器的书签，以后获取网页的标题和链接只需要点击这个书签即可。链接的标题默认是网站的标题，也可以选中一段文字作为标题。
orgmode 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[[&#39; &#43; location.href &#43; &#39;][&#39; &#43; anchor &#43; &#39;]]&#39;)); })();
markdown 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[&#39; &#43; anchor &#43; &#39;](&#39; &#43; location.href &#43; &#39;)&#39;)); })();
附录C：我的 YASnippet 模板
hugo 文章信息模板
# -*- mode: snippet -*-
# name: hugo
# key: h
# --
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE: $1
#&#43;DATE: `(format-time-string &quot;%Y-%m-%d&quot;)`
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS: $2
#&#43;HUGO_CATEGORIES: $3
#&#43;HUGO_DRAFT: false

$0
more
我也搞不清为什么我总是记不住 `"><meta itemprop="datePublished" content="2018-03-31T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-11-17T14:41:03+08:00" />
<meta itemprop="wordCount" content="1903">
<meta itemprop="keywords" content="emacs,editor,orgmode,hugo,写作,tool,博客," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="博客写作流程之工具篇： emacs, orgmode, hugo &amp; ox-hugo"/>
<meta name="twitter:description" content="本文将对我个人的博文写作流程 所用到的工具 做一个总结与分享。从标题就可以看出来，主要有这几个工具： emacs, orgmode &amp; hugo ，另外还有两个配合 hugo 的辅助包 easy-hugo （可选） &amp; ox-hugo 。

hugo : https://gohugo.io/
orgmode : https://orgmode.org/
ox-hugo : https://ox-hugo.scripter.co/
easy-hygo : https://github.com/masasam/emacs-easy-hugo

&lt;!&ndash;more&ndash;&gt;
自问自答
问： 为什么写这篇文章？
答： 中文搜索居然搜索不到一篇有关 ox-hugo 的内容。
问： 这篇文章主要解决什么问题？
答： orgmode 配合 hugo 来写作、发布、管理博文的一种便捷方案。
问： 为什么用 emacs 和 orgmode ？
答： 谁让我当年入了 emacs 和 orgmode 的「坑」 😂 ，这只是习惯而已。这俩工具还是需要一定的学习成本的，因此，本文对不熟悉 emacs 和 orgmode，或者使用其它编辑器的用户没多大帮助，但多少可以了解一下。
问： 为什么用 hugo ？
答： 最开始只是因为 hugo 原生支持 orgmode ，事后来看，其实支持的不是很好，但是 ox-hugo 解决了用 orgmode 写博文的问题。当然还有一点，在生成静态网站的诸多工具（如 jekyll, hexo 等等）中，我发现 hugo 的安装是最便捷的，只需要下载一个二进制文件直接安装就能用了，而其它工具却总要安装一些别的依赖。网上还有种说法是 hugo 的网站生成速度是最快的，这个我没测试过，也不太确定。
发布博文的一般流程

创建一个 orgmode heading 作为博文标题；
写文章（废话）；
使用 ox-hugo 生成 markdown 文件；
使用 easy-hugo 预览；
发布（废话）。

如前文所说，如果你不熟悉 emacs 和 orgmode ，一定会觉得这个流程好麻烦，何必用这些工具，把写作这回事儿弄得复杂了。我下面会对这个流程进行补充说明，并阐述它们的优点。
创建博文
正常我们使用 hugo 是怎样创建一篇新博文的呢？在命令行下，敲击命令 hugo new posts/my-first-post.md ，然后用自己熟悉的编辑器编辑这个文件。这个文件的头部包含我们这篇文章的一些基本信息，比如像这样：
---
title: &#34;An Example Post&#34;  #标题
date: 2018-01-01T16:01:23&#43;08:00 #发布时间
lastmod: 2018-01-02T16:01:23&#43;08:00 #修改时间
draft: false  #是否是草稿？
tags: [&#34;tag-1&#34;, &#34;tag-2&#34;, &#34;tag-3&#34;]  #标签
categories: [&#34;index&#34;]  #分类
---
那么，使用 ox-hugo 之后，是怎样表示这些基本信息的呢？
一种是使用 orgmode 的一个标题（heading），这种方式比较适合一些随笔或者简短的文章，像这样：




    
      
    
    
  


说明：

1 是 ox-hugo 的单文件配置
2 是这篇文章的完成情况， DONE 说明已完成
3 是这篇文章的标题
4 是这篇文章的 tag ，tag 前带有 @ 表示 category
5 是 DONE 自动生成的时间戳，表示这篇文章的完成时间
6 是导出为 markdown 文件后的文件名

还有一种是使用单独的文件 example.org ，像这样：




    
      
    
    
  


这两种方式都可以配合 emacs 强大的功能来快速生成，而不必每次都手动输入，亦或是复制粘贴。
使用 org-capture 创建博文
以下配置摘自 官方介绍 ：
;; org-hugo capture
(with-eval-after-load &#39;org-capture
  (defun org-hugo-new-subtree-post-capture-template ()
    &#34;Returns `org-capture&#39; template string for new Hugo post.
See `org-capture-templates&#39; for more information.&#34;
    (let* (;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/
           (date (format-time-string (org-time-stamp-format :long :inactive) (org-current-time)))
           (title (read-from-minibuffer &#34;Post Title: &#34;)) ;Prompt to enter the post title
           (fname (org-hugo-slug title)))
      (mapconcat #&#39;identity
                 `(
                   ,(concat &#34;** TODO &#34; title &#34;     :@随笔:&#34;)
                   &#34;:PROPERTIES:&#34;
                   ,(concat &#34;:EXPORT_FILE_NAME: &#34; fname)
                   ;; ,(concat &#34;:EXPORT_DATE: &#34; date) ;Enter current date and time
                   &#34;:END:&#34;
                   &#34;%?\n&#34;)          ;Place the cursor here finally
                 &#34;\n&#34;)))

  (add-to-list &#39;org-capture-templates
               &#39;(&#34;h&#34;                ;`org-capture&#39; binding &#43; h
                 &#34;Hugo post&#34;
                 entry
                 ;; It is assumed that below file is present in `org-directory&#39;
                 ;; and that it has a &#34;Blog Ideas&#34; heading. It can even be a
                 ;; symlink pointing to the actual location of all-posts.org!
                 (file&#43;headline &#34;~/Dropbox/Write/blog/orgpost/0000-posts.org&#34; &#34;INBOX&#34;)
                 (function org-hugo-new-subtree-post-capture-template))))

(spacemacs/set-leader-keys &#34;av&#34; &#39;org-capture)

使用 YASnippet 创建博文
我在文末的附录中，会附上我使用的一些 snippet 模板。
模板的用法：
输入字母 h ，按下 M-/ ，它就会自动帮你生成以下内容：
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE:
#&#43;DATE:
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS:
#&#43;HUGO_CATEGORIES:
#&#43;HUGO_DRAFT: false
由 ox-hugo 生成 markdown
尽管说 hugo 原生支持渲染 orgmode 文件，但它所使用的 markdown 渲染引擎比 orgmode 的渲染引擎要强大的多，谁让 markdown 更流行呢？这是使用 ox-hugo 的原因之一。
使用 ox-hugo 可以将你的 orgmode 博文，生成指定的 markdown 文件，这只需要一条指令就够了（官方默认 C-c C-e H h ），并且，它还会自动更正你的文章 修改时间 ，markdown 文件中的 lastmod 值。
至此，你就已经可以按照常规的方法来预览、发布你的博文了。不过还有一个扩展没有介绍—— easy-hugo 。
使用 easy-hugo 管理你的博客（可选）
{{&lt; figure src=&quot;/image/other/ox-hugo-00.png&quot; title=&ldquo;Easy-Hugo 主界面&rdquo; class=&ldquo;center&rdquo; &gt;}}
常规的方法是怎样来预览你的博客呢？先进入你的博客目录，然后键入命令 hugo server 。
使用 easy-hugo 之后，打开它的主界面（我的快捷键 &lt;SPA&gt; a h ），再按 p 键就可以直接预览了。它还有快速打开你的博客配置文件，快速发布到 github，等等功能，可以单独写篇介绍了。不过我只是用它来管理博文而已。
最后的总结
emacs ，想说爱你不容易。😅
用惯了一种编辑器，任何文本编辑相关的工作都想通过它来完成，换用其他的编辑器总觉得缺了些什么。这个写作流程，在我短暂的使用过程中（不到一年），总体上还是挺舒适的。这篇文章算是做一个梳理。
为什么我从头到尾都没提到如何配置 ox-hugo 和 easy-hugo 呢？ emacs 的配置千差万别，怎样配置还是自己去看它们的文档吧。
附录A：几个辅助写作的 emacs 扩展

joostkremers/writeroom-mode: Writeroom-mode: distraction-free writing for Emacs.
spacemacs 的 emoji Layer ，方便插入 emoji 表情

附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接
将以下代码存储为浏览器的书签，以后获取网页的标题和链接只需要点击这个书签即可。链接的标题默认是网站的标题，也可以选中一段文字作为标题。
orgmode 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[[&#39; &#43; location.href &#43; &#39;][&#39; &#43; anchor &#43; &#39;]]&#39;)); })();
markdown 的 bookmarklet ：
javascript:(function () { var selection = window.getSelection().toString(); var anchor = selection ? selection : document.title; void(prompt(&#39;&#39;, &#39;[&#39; &#43; anchor &#43; &#39;](&#39; &#43; location.href &#43; &#39;)&#39;)); })();
附录C：我的 YASnippet 模板
hugo 文章信息模板
# -*- mode: snippet -*-
# name: hugo
# key: h
# --
#&#43;HUGO_BASE_DIR: ../
#&#43;TITLE: $1
#&#43;DATE: `(format-time-string &quot;%Y-%m-%d&quot;)`
#&#43;HUGO_AUTO_SET_LASTMOD: t
#&#43;HUGO_TAGS: $2
#&#43;HUGO_CATEGORIES: $3
#&#43;HUGO_DRAFT: false

$0
more
我也搞不清为什么我总是记不住 `"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Manbofish</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/">全部文章</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/categories/">目录</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/about/">关于</a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      Manbofish
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/">全部文章</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/categories/">目录</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="http://blog.morechina.com/about/">关于</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight wallpaper">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
  
  <header class="post-header">
    <h1 class="post-title">博客写作流程之工具篇： emacs, orgmode, hugo &amp; ox-hugo</h1>
    
    <div class="post-meta">
      <time datetime="2018-03-31" class="post-time">
        2018-03-31
      </time>
	<span class="more-meta"> 约 1903 字 </span>
	<span class="more-meta"> 预计阅读 4 分钟 </span>

    </div>
  </header>

  
  
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#自问自答">自问自答</a>
      <ul>
        <li><a href="#问-为什么写这篇文章">问： 为什么写这篇文章？</a></li>
        <li><a href="#问-这篇文章主要解决什么问题">问： 这篇文章主要解决什么问题？</a></li>
        <li><a href="#问-为什么用-emacs-和-orgmode">问： 为什么用 emacs 和 orgmode ？</a></li>
        <li><a href="#问-为什么用-hugo">问： 为什么用 hugo ？</a></li>
      </ul>
    </li>
    <li><a href="#发布博文的一般流程">发布博文的一般流程</a></li>
    <li><a href="#创建博文">创建博文</a>
      <ul>
        <li><a href="#使用-org-capture-创建博文">使用 org-capture 创建博文</a></li>
        <li><a href="#使用-yasnippet-创建博文">使用 YASnippet 创建博文</a></li>
      </ul>
    </li>
    <li><a href="#由-ox-hugo-生成-markdown">由 ox-hugo 生成 markdown</a></li>
    <li><a href="#使用-easy-hugo-管理你的博客-可选">使用 easy-hugo 管理你的博客（可选）</a></li>
    <li><a href="#最后的总结">最后的总结</a></li>
    <li><a href="#附录a-几个辅助写作的-emacs-扩展">附录A：几个辅助写作的 emacs 扩展</a></li>
    <li><a href="#附录b-快速获取-orgmode-或-markdown-格式的网页标题和链接">附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接</a></li>
    <li><a href="#附录c-我的-yasnippet-模板">附录C：我的 YASnippet 模板</a>
      <ul>
        <li><a href="#hugo-文章信息模板">hugo 文章信息模板</a></li>
        <li><a href="#more">more</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>

  
  <div class="post-content">
      <p>本文将对我个人的博文写作流程 <strong>所用到的工具</strong> 做一个总结与分享。从标题就可以看出来，主要有这几个工具： <code>emacs</code>, <code>orgmode</code> &amp; <code>hugo</code> ，另外还有两个配合 <code>hugo</code> 的辅助包 <code>easy-hugo</code> （可选） &amp; <code>ox-hugo</code> 。</p>
<ul>
<li><code>hugo</code> : <a href="https://gohugo.io/">https://gohugo.io/</a></li>
<li><code>orgmode</code> : <a href="https://orgmode.org/">https://orgmode.org/</a></li>
<li><code>ox-hugo</code> : <a href="https://ox-hugo.scripter.co/">https://ox-hugo.scripter.co/</a></li>
<li><code>easy-hygo</code> : <a href="https://github.com/masasam/emacs-easy-hugo">https://github.com/masasam/emacs-easy-hugo</a></li>
</ul>
<p>&lt;!&ndash;more&ndash;&gt;</p>
<h2 id="自问自答">自问自答</h2>
<h3 id="问-为什么写这篇文章">问： 为什么写这篇文章？</h3>
<p>答： 中文搜索居然搜索不到一篇有关 <code>ox-hugo</code> 的内容。</p>
<h3 id="问-这篇文章主要解决什么问题">问： 这篇文章主要解决什么问题？</h3>
<p>答： orgmode 配合 hugo 来写作、发布、管理博文的一种便捷方案。</p>
<h3 id="问-为什么用-emacs-和-orgmode">问： 为什么用 emacs 和 orgmode ？</h3>
<p>答： 谁让我当年入了 emacs 和 orgmode 的「坑」 😂 ，这只是习惯而已。这俩工具还是需要一定的学习成本的，因此，本文对不熟悉 emacs 和 orgmode，或者使用其它编辑器的用户没多大帮助，但多少可以了解一下。</p>
<h3 id="问-为什么用-hugo">问： 为什么用 hugo ？</h3>
<p>答： 最开始只是因为 hugo 原生支持 orgmode ，事后来看，其实支持的不是很好，但是 ox-hugo 解决了用 orgmode 写博文的问题。当然还有一点，在生成静态网站的诸多工具（如 jekyll, hexo 等等）中，我发现 hugo 的安装是最便捷的，只需要下载一个二进制文件直接安装就能用了，而其它工具却总要安装一些别的依赖。网上还有种说法是 hugo 的网站生成速度是最快的，这个我没测试过，也不太确定。</p>
<h2 id="发布博文的一般流程">发布博文的一般流程</h2>
<ol>
<li>创建一个 orgmode heading 作为博文标题；</li>
<li>写文章（废话）；</li>
<li>使用 ox-hugo 生成 markdown 文件；</li>
<li>使用 easy-hugo 预览；</li>
<li>发布（废话）。</li>
</ol>
<p>如前文所说，如果你不熟悉 emacs 和 orgmode ，一定会觉得这个流程好麻烦，何必用这些工具，把写作这回事儿弄得复杂了。我下面会对这个流程进行补充说明，并阐述它们的优点。</p>
<h2 id="创建博文">创建博文</h2>
<p>正常我们使用 hugo 是怎样创建一篇新博文的呢？在命令行下，敲击命令 <code>hugo new posts/my-first-post.md</code> ，然后用自己熟悉的编辑器编辑这个文件。这个文件的头部包含我们这篇文章的一些基本信息，比如像这样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
<span style="color:#f92672">title</span>: <span style="color:#e6db74">&#34;An Example Post&#34;</span>  <span style="color:#75715e">#标题</span>
<span style="color:#f92672">date</span>: <span style="color:#e6db74">2018-01-01T16:01:23</span><span style="color:#ae81ff">+08</span>:<span style="color:#ae81ff">00</span> <span style="color:#75715e">#发布时间</span>
<span style="color:#f92672">lastmod</span>: <span style="color:#e6db74">2018-01-02T16:01:23</span><span style="color:#ae81ff">+08</span>:<span style="color:#ae81ff">00</span> <span style="color:#75715e">#修改时间</span>
<span style="color:#f92672">draft</span>: <span style="color:#66d9ef">false</span>  <span style="color:#75715e">#是否是草稿？</span>
<span style="color:#f92672">tags</span>: [<span style="color:#e6db74">&#34;tag-1&#34;</span>, <span style="color:#e6db74">&#34;tag-2&#34;</span>, <span style="color:#e6db74">&#34;tag-3&#34;</span>]  <span style="color:#75715e">#标签</span>
<span style="color:#f92672">categories</span>: [<span style="color:#e6db74">&#34;index&#34;</span>]  <span style="color:#75715e">#分类</span>
---
</code></pre></div><p>那么，使用 <code>ox-hugo</code> 之后，是怎样表示这些基本信息的呢？</p>
<p>一种是使用 orgmode 的一个标题（heading），这种方式比较适合一些随笔或者简短的文章，像这样：</p>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" >
    <div class="img">
      <img itemprop="thumbnail" src="~/Dropbox/Write/blog/static/image/other/ox-hugo-01.png" />
    </div>
    <a href="~/Dropbox/Write/blog/static/image/other/ox-hugo-01.png" itemprop="contentUrl"></a>
  </figure>
</div>

<p><strong>说明：</strong></p>
<ul>
<li>1 是 ox-hugo 的单文件配置</li>
<li>2 是这篇文章的完成情况， <code>DONE</code> 说明已完成</li>
<li>3 是这篇文章的标题</li>
<li>4 是这篇文章的 tag ，tag 前带有 <code>@</code> 表示 category</li>
<li>5 是 <code>DONE</code> 自动生成的时间戳，表示这篇文章的完成时间</li>
<li>6 是导出为 markdown 文件后的文件名</li>
</ul>
<p>还有一种是使用单独的文件 <code>example.org</code> ，像这样：</p>


<div class="box">
<figure  itemprop="associatedMedia"
  itemscope itemtype="http://schema.org/ImageObject" >
    <div class="img">
      <img itemprop="thumbnail" src="~/Dropbox/Write/blog/static/image/other/ox-hugo-02.png" />
    </div>
    <a href="~/Dropbox/Write/blog/static/image/other/ox-hugo-02.png" itemprop="contentUrl"></a>
  </figure>
</div>

<p>这两种方式都可以配合 emacs 强大的功能来快速生成，而不必每次都手动输入，亦或是复制粘贴。</p>
<h3 id="使用-org-capture-创建博文">使用 org-capture 创建博文</h3>
<p>以下配置摘自 <a href="https://ox-hugo.scripter.co/doc/org-capture-setup/">官方介绍</a> ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elisp" data-lang="elisp"><span style="color:#75715e">;; org-hugo capture</span>
(with-eval-after-load <span style="color:#e6db74">&#39;org-capture</span>
  (defun org-hugo-new-subtree-post-capture-template ()
    <span style="color:#e6db74">&#34;Returns </span><span style="color:#e6db74">`org-capture&#39;</span><span style="color:#e6db74"> template string for new Hugo post.
</span><span style="color:#e6db74">See </span><span style="color:#e6db74">`org-capture-templates&#39;</span><span style="color:#e6db74"> for more information.&#34;</span>
    (let* (<span style="color:#75715e">;; http://www.holgerschurig.de/en/emacs-blog-from-org-to-hugo/</span>
           (date (<span style="color:#a6e22e">format-time-string</span> (org-time-stamp-format :long :inactive) (org-current-time)))
           (title (<span style="color:#a6e22e">read-from-minibuffer</span> <span style="color:#e6db74">&#34;Post Title: &#34;</span>)) <span style="color:#75715e">;Prompt to enter the post title</span>
           (fname (org-hugo-slug title)))
      (<span style="color:#a6e22e">mapconcat</span> <span style="color:#a6e22e">#&#39;identity</span>
                 <span style="color:#f92672">`</span>(
                   <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> <span style="color:#e6db74">&#34;** TODO &#34;</span> title <span style="color:#e6db74">&#34;     :@随笔:&#34;</span>)
                   <span style="color:#e6db74">&#34;:PROPERTIES:&#34;</span>
                   <span style="color:#f92672">,</span>(<span style="color:#a6e22e">concat</span> <span style="color:#e6db74">&#34;:EXPORT_FILE_NAME: &#34;</span> fname)
                   <span style="color:#75715e">;; ,(concat &#34;:EXPORT_DATE: &#34; date) ;Enter current date and time</span>
                   <span style="color:#e6db74">&#34;:END:&#34;</span>
                   <span style="color:#e6db74">&#34;%?\n&#34;</span>)          <span style="color:#75715e">;Place the cursor here finally</span>
                 <span style="color:#e6db74">&#34;\n&#34;</span>)))

  (add-to-list <span style="color:#e6db74">&#39;org-capture-templates</span>
               <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;h&#34;</span>                <span style="color:#75715e">;`org-capture&#39; binding + h</span>
                 <span style="color:#e6db74">&#34;Hugo post&#34;</span>
                 entry
                 <span style="color:#75715e">;; It is assumed that below file is present in `org-directory&#39;</span>
                 <span style="color:#75715e">;; and that it has a &#34;Blog Ideas&#34; heading. It can even be a</span>
                 <span style="color:#75715e">;; symlink pointing to the actual location of all-posts.org!</span>
                 (file+headline <span style="color:#e6db74">&#34;~/Dropbox/Write/blog/orgpost/0000-posts.org&#34;</span> <span style="color:#e6db74">&#34;INBOX&#34;</span>)
                 (function org-hugo-new-subtree-post-capture-template))))

(spacemacs/set-leader-keys <span style="color:#e6db74">&#34;av&#34;</span> <span style="color:#e6db74">&#39;org-capture</span>)

</code></pre></div><h3 id="使用-yasnippet-创建博文">使用 YASnippet 创建博文</h3>
<p>我在文末的附录中，会附上我使用的一些 snippet 模板。</p>
<p>模板的用法：
输入字母 <code>h</code> ，按下 <code>M-/</code> ，它就会自动帮你生成以下内容：</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil">#+HUGO_BASE_DIR: ../
#+TITLE:
#+DATE:
#+HUGO_AUTO_SET_LASTMOD: t
#+HUGO_TAGS:
#+HUGO_CATEGORIES:
#+HUGO_DRAFT: false
</code></pre><h2 id="由-ox-hugo-生成-markdown">由 ox-hugo 生成 markdown</h2>
<p>尽管说 <code>hugo</code> 原生支持渲染 orgmode 文件，但它所使用的 markdown 渲染引擎比 orgmode 的渲染引擎要强大的多，谁让 markdown 更流行呢？这是使用 <code>ox-hugo</code> 的原因之一。</p>
<p>使用 <code>ox-hugo</code> 可以将你的 orgmode 博文，生成指定的 markdown 文件，这只需要一条指令就够了（官方默认 <code>C-c C-e H h</code> ），并且，它还会自动更正你的文章 <strong>修改时间</strong> ，markdown 文件中的 <code>lastmod</code> 值。</p>
<p>至此，你就已经可以按照常规的方法来预览、发布你的博文了。不过还有一个扩展没有介绍—— <code>easy-hugo</code> 。</p>
<h2 id="使用-easy-hugo-管理你的博客-可选">使用 easy-hugo 管理你的博客（可选）</h2>
<p>{{&lt; figure src=&quot;/image/other/ox-hugo-00.png&quot; title=&ldquo;Easy-Hugo 主界面&rdquo; class=&ldquo;center&rdquo; &gt;}}</p>
<p>常规的方法是怎样来预览你的博客呢？先进入你的博客目录，然后键入命令 <code>hugo server</code> 。</p>
<p>使用 <code>easy-hugo</code> 之后，打开它的主界面（我的快捷键 <code>&lt;SPA&gt; a h</code> ），再按 <code>p</code> 键就可以直接预览了。它还有快速打开你的博客配置文件，快速发布到 github，等等功能，可以单独写篇介绍了。不过我只是用它来管理博文而已。</p>
<h2 id="最后的总结">最后的总结</h2>
<p><code>emacs</code> ，想说爱你不容易。😅</p>
<p>用惯了一种编辑器，任何文本编辑相关的工作都想通过它来完成，换用其他的编辑器总觉得缺了些什么。这个写作流程，在我短暂的使用过程中（不到一年），总体上还是挺舒适的。这篇文章算是做一个梳理。</p>
<p>为什么我从头到尾都没提到如何配置 <code>ox-hugo</code> 和 <code>easy-hugo</code> 呢？ emacs 的配置千差万别，怎样配置还是自己去看它们的文档吧。</p>
<h2 id="附录a-几个辅助写作的-emacs-扩展">附录A：几个辅助写作的 emacs 扩展</h2>
<ol>
<li><a href="https://github.com/joostkremers/writeroom-mode">joostkremers/writeroom-mode: Writeroom-mode: distraction-free writing for Emacs.</a></li>
<li>spacemacs 的 emoji Layer ，方便插入 emoji 表情</li>
</ol>
<h2 id="附录b-快速获取-orgmode-或-markdown-格式的网页标题和链接">附录B：快速获取 orgmode 或 markdown 格式的网页标题和链接</h2>
<p>将以下代码存储为浏览器的书签，以后获取网页的标题和链接只需要点击这个书签即可。链接的标题默认是网站的标题，也可以选中一段文字作为标题。</p>
<p>orgmode 的 bookmarklet ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">javascript</span><span style="color:#f92672">:</span>(<span style="color:#66d9ef">function</span> () { <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">getSelection</span>().<span style="color:#a6e22e">toString</span>(); <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">anchor</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">:</span> document.<span style="color:#a6e22e">title</span>; <span style="color:#66d9ef">void</span>(<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;[[&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;][&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">anchor</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;]]&#39;</span>)); })();
</code></pre></div><p>markdown 的 bookmarklet ：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">javascript</span><span style="color:#f92672">:</span>(<span style="color:#66d9ef">function</span> () { <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">getSelection</span>().<span style="color:#a6e22e">toString</span>(); <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">anchor</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">selection</span> <span style="color:#f92672">:</span> document.<span style="color:#a6e22e">title</span>; <span style="color:#66d9ef">void</span>(<span style="color:#a6e22e">prompt</span>(<span style="color:#e6db74">&#39;&#39;</span>, <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">anchor</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;](&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;)&#39;</span>)); })();
</code></pre></div><h2 id="附录c-我的-yasnippet-模板">附录C：我的 YASnippet 模板</h2>
<h3 id="hugo-文章信息模板">hugo 文章信息模板</h3>
<pre tabindex="0"><code class="language-nil" data-lang="nil"># -*- mode: snippet -*-
# name: hugo
# key: h
# --
#+HUGO_BASE_DIR: ../
#+TITLE: $1
#+DATE: `(format-time-string &quot;%Y-%m-%d&quot;)`
#+HUGO_AUTO_SET_LASTMOD: t
#+HUGO_TAGS: $2
#+HUGO_CATEGORIES: $3
#+HUGO_DRAFT: false

$0
</code></pre><h3 id="more">more</h3>
<p>我也搞不清为什么我总是记不住 `</p>
<p>` 这个标签</p>
<pre tabindex="0"><code class="language-nil" data-lang="nil"># -*- mode: snippet -*-
# name: more
# key: m
# --
&lt;!--more--&gt;

$0
</code></pre><p>有待补充&hellip;</p>
  </div>

  
  
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Manbofish</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
      2022-11-17
      
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


  
  
</article>




  

  
  

  
  

  

  

    

  

  

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="manbofish@morechina.com.cn" rel="me noopener" class="iconfont"
      title="email"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="http://github.com/xushaobo" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>


<a href="http://blog.morechina.com/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        Manbofish
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.fe83e11b4fbc9193d67e2c9db78bad21f8dc59fca0cacd8c1c3bb071bb16a852.js" integrity="sha256-/oPhG0&#43;8kZPWfiydt4utIfjcWfygys2MHDuwcbsWqFI=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  

















</body>
</html>
